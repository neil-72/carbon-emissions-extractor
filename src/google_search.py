import logging
from googlesearch import search
import time

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

def search_sustainability_reports(company_name, years=[2024, 2023, 2022]):
    """Search for sustainability reports using Google Search."""
    pdf_urls = []
    
    for year in years:
        query = f"{company_name} sustainability report {year} filetype:pdf"
        logger.info(f"Searching for: {query}")
        try:
            search_results = search(query, num_results=3)
            
            for url in search_results:
                if url.lower().endswith('.pdf'):
                    logger.info(f"Found PDF for {year}: {url}")
                    pdf_urls.append(url)
            
            time.sleep(2)
            
        except Exception as e:
            logger.error(f"Error searching for {year} report: {e}")
    
    logger.info(f"Found total of {len(pdf_urls)} PDF URLs")
    return pdf_urls